---
title: 内容管理
description: 文件上传、下载、属性信息，表单数据增删改
---

==========================
内容管理
==========================

内容管理分为 ``content`` 接口和 ``file`` 2种。

- content：负责内容(包括文件夹、文件、快捷方式、表单)的元数据、授权等
- file: 负责文件的上传下载和文件存储相关的内容

.. contents::
.. sectnum::

API结构
==============
.. raw:: html

    <?xml version="1.0"?>
    <svg width="640.0000000000001" height="480" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">
     <!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
     <g>
      <title>Layer 1</title>
      <rect stroke="#000000" id="svg_2" height="62" width="125" y="206" x="77" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" fill="#bfbfbf"/>
      <text xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" id="svg_6" y="242" x="139" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="0" stroke="#000000" fill="#000000">wo</text>
      <rect id="svg_7" height="67" width="138" y="210" x="462" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="#bfbfbf"/>
      <text xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" id="svg_8" y="253" x="530" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="0" stroke="#000000" fill="#000000">viewer</text>
      <rect id="svg_9" height="65" width="138" y="263" x="270" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="#bfbfbf"/>
      <text xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" id="svg_10" y="300" x="343" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="0" stroke="#000000" fill="#000000">file</text>
      <path stroke="#000000" transform="rotate(-62.2036 121.058 335.18)" id="svg_11" d="m126.202553,323.706635c-5.04361,-1.688477 5.13633,-4.544739 9.712669,-2.598816c3.906631,1.686157 -4.775925,3.830383 -9.712669,2.598816zm13.504845,3.84082c-4.121353,-1.857788 7.154877,-3.84314 10.722885,-1.986511c4.233917,1.941284 -7.208817,4.158569 -10.722885,1.986511zm15.373947,4.649109c-5.149582,-1.068054 -0.032181,-3.532349 5.299957,-3.312012c7.405563,0.346741 5.425766,4.128418 -1.797241,3.944031c-1.40184,-0.051025 -2.651398,-0.294556 -3.502716,-0.632019zm12.859711,4.105225c-4.305801,-1.679199 5.623459,-3.882568 9.797775,-2.284546c4.539444,1.776611 -5.592239,4.12262 -9.797775,2.284546zm-24.972153,0.091614c-4.787277,-1.389282 2.239929,-3.63324 7.525696,-3.047607c7.680832,0.753754 1.970337,4.376587 -4.884705,3.553192c-0.942108,-0.136841 -1.786819,-0.324707 -2.640991,-0.505615l0,0.000031zm-20.359871,0c-5.626305,-1.610779 4.652946,-4.255981 9.467659,-2.572144c4.885651,1.756897 -4.282158,4.247864 -9.467659,2.572144zm-20.112045,-0.091614c-4.30864,-1.67804 5.626305,-3.882568 9.795891,-2.284546c4.527153,1.78125 -5.577118,4.12262 -9.795891,2.284546zm-19.15477,0.091614c-5.626297,-1.610779 4.6539,-4.255981 9.468613,-2.572144c4.884705,1.756897 -4.283096,4.247864 -9.468613,2.572144zm-20.110138,-0.090454c-4.936729,-1.979553 8.414848,-4.141174 10.640594,-1.657166c1.645889,1.661774 -7.266525,3.10907 -10.640594,1.657166zm91.033882,4.40094c-4.797684,-1.526123 3.734467,-4.19104 8.854706,-2.801758c6.321548,1.382324 -2.055466,4.587646 -7.859604,3.10907c-0.327286,-0.10437 -0.66214,-0.205261 -0.995087,-0.307312l-0.000015,0zm-14.558563,3.782837c-4.044739,-1.768494 6.467209,-3.708618 10.263168,-2.050293c4.953751,1.760376 -4.994431,4.159729 -9.5755,2.401672l-0.687668,-0.351379zm-13.022415,4.704773c-4.370125,-1.224609 1.631714,-3.154297 6.387756,-2.827271c7.23909,0.572876 2.676941,4.131897 -3.962433,3.455811c-1.029129,-0.107849 -1.864395,-0.34906 -2.425323,-0.62854z" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" fill="#bfbfbf"/>
      <line id="svg_12" y2="327" x2="348" y1="426" x1="357" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="none"/>
      <path stroke="#000000" transform="rotate(1.37898 332.332 217.76)" id="svg_4" d="m396.042877,225.801041c-10.564606,-3.276123 -51.145081,-4.9039 -131.130249,-5.25705l-54.085083,-0.23941l0,-2.868011l0,-2.867859l40.82106,0c48.126755,0 82.544601,-0.587891 110.621658,-1.892853c16.567383,-0.769135 22.074188,-1.259186 29.564392,-2.63443l9.202454,-1.688141l26.397766,4.686646l26.401093,4.687378l-26.694458,4.720184l-26.693573,4.718872l-4.40506,-1.365326z" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" fill="none"/>
      <path stroke="#000000" id="svg_14" transform="rotate(-153.124 238.628 278.688)" d="m256.135468,286.728821c-2.903122,-3.276123 -14.054367,-4.9039 -36.033844,-5.25705l-14.862259,-0.23941l0,-2.868011l0,-2.867859l11.217392,0c13.22496,0 22.68277,-0.587891 30.398178,-1.892853c4.552628,-0.769135 6.065872,-1.259186 8.124115,-2.63443l2.528793,-1.688141l7.253937,4.686646l7.254852,4.687378l-7.33548,4.720184l-7.335236,4.718872l-1.210449,-1.365326z" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" fill="none"/>
      <line stroke="#000000" id="svg_15" y2="157.000002" x2="414.000001" y1="257.000002" x1="338" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" fill="none"/>
      <ellipse ry="37" rx="56" id="svg_16" cy="116" cx="429" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="none"/>
      <text xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" id="svg_18" y="117" x="429" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="0" stroke="#000000" fill="#000000">storage</text>
      <line id="svg_19" y2="209" x2="513" y1="145" x1="459" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="none"/>
      <line id="svg_20" y2="278" x2="531" y1="419" x1="537" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="none"/>
      <path d="m335,351c0.878662,-1.221344 1.40094,-1.89035 1.97467,-2.425323c0.602295,-0.561615 1.128418,-1.23822 1.457336,-1.904022c0.442993,-0.896759 1.062042,-2.007904 1.331818,-2.413147c0.577057,-0.866852 0.905365,-1.2948 1.52417,-2.170837c0.298706,-0.422852 1.102875,-1.560638 1.370667,-2.22934c0.384186,-0.959351 0.341339,-1.97467 0.341339,-2.667175c0,-0.959503 0,-1.710999 0,-2.507477c0,-1.221008 0,-2.021027 0,-2.925507c0,-0.957184 -0.047791,-1.858459 0,-2.757172c0.042725,-0.803375 0.491516,-1.609497 1.482666,-1.915985c0.635376,-0.196472 1.373627,-0.810333 2.127991,-1.073334c0.859497,-0.299683 1.87854,-0.045563 2.636017,0.02533c0.925171,0.086578 1.725037,0.275757 2.527985,0.610657c1.088593,0.454041 1.562042,0.81842 2.246185,1.415833c0.503784,0.439911 1.308838,1.274536 1.948486,1.904175c0.68811,0.677338 1.032104,1.034698 1.782501,1.670837c1.055176,0.894531 1.75061,1.321625 2.380157,1.65448c0.782227,0.413574 1.726349,0.877502 1.864014,1.593353c0.177551,0.923431 0.301361,1.985596 0.865326,2.489319c0.619415,0.553253 1.337158,1.06543 1.692017,1.835999c0.435669,0.946014 0.341705,1.837738 0.779999,2.789337c0.296356,0.643372 0.85199,1.200012 1.5,2l0.519989,0.789337l0.360016,0.725342l0.250641,0.859985" id="svg_21" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="none"/>
      <path d="m345,406c1.700012,0 2.5625,0.131439 3.166992,0.704498c0.617584,0.58551 1.431763,0.800812 2.237,1.351501c0.943359,0.645142 1.217743,0.987122 1.817352,1.68399c0.672577,0.781677 0.995575,1.243073 1.349335,1.720001c0.768311,1.035828 1.598206,2.192688 2.034668,2.802521c0.446228,0.623505 0.895996,1.257385 1.343994,1.897491c0.446655,0.638214 0.889343,1.268829 1.717316,2.506653c0.393005,0.587585 0.766174,1.152649 1.429352,2.218689c0.303284,0.487518 0.83313,1.371704 1.045319,1.77066c0.631714,1.187653 0.024017,2.975342 0.858673,2.973328c0.929321,-0.002228 0.000061,-1.730011 0,-2.558014c-0.000092,-1.058655 -0.002228,-1.836029 -0.010681,-2.300659c-0.02002,-1.10144 -0.042969,-1.746155 -0.074646,-2.458649c-0.073212,-1.645752 -0.13446,-2.582428 -0.198669,-3.58136c-0.067047,-1.043091 -0.140991,-2.11203 -0.216003,-3.188995c-0.074341,-1.067017 -0.148865,-2.105896 -0.216003,-3.098999c-0.120056,-1.775818 -0.164429,-2.527222 -0.198669,-3.186646c-0.029846,-0.575256 -0.049316,-1.074677 -0.064484,-1.506012l-0.010162,-0.371338l-0.009338,-0.594666l-0.001343,-1.090668" id="svg_22" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="none"/>
      <path d="m525,394c1.799988,0 2.704956,-0.072723 3.541687,0.020844c1.014771,0.113495 1.736206,0.387115 2.510132,0.740814c0.800537,0.365875 1.526733,0.869141 2.137512,1.520996c0.436218,0.465546 1.024109,1.352264 1.406189,2.027191c0.39801,0.703064 0.769653,1.432129 1.237793,2.523499c0.425476,0.991943 0.660828,1.593475 0.880005,2.394653c0.300415,1.098236 0.286682,2.093323 0.286682,2.772003c0,0.978485 0.123352,1.814087 -0.05719,2.757172c-0.177307,0.926178 -0.596375,1.588104 -0.890137,2.485657c-0.279907,0.855255 -0.187927,2.530457 -1.052673,2.386505c-0.819397,-0.136414 -0.013977,-1.796326 0.010681,-2.540009c0.029663,-0.894684 0.067139,-1.288666 0.210632,-2.839325c0.05957,-0.643646 0.131836,-1.336609 0.204041,-2.070007c0.075134,-0.763275 0.151306,-1.546478 0.221985,-2.339996c0.070679,-0.793152 0.189453,-2.339783 0.231506,-3.0755c0.07959,-1.392639 0.103516,-2.056671 0.141968,-2.701996c0.037598,-0.630676 0.121094,-1.862549 0.3125,-3.0625c0.096008,-0.601837 0.37384,-1.788513 0.538696,-2.368011c0.162598,-0.571564 0.525208,-1.66507 0.730652,-2.175995c0.565002,-1.404846 0.987671,-2.187317 1.376526,-2.893494c0.358887,-0.651642 0.874023,-1.55368 1.263672,-2.458008c0.249146,-0.578278 0.529358,-1.430176 0.957153,-2.417816c0.282715,-0.652771 0.799988,-1.52002 1.399963,-2.240021l0.789368,-0.421326l0.610657,-0.52533l0.610657,-0.489319" id="svg_23" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="none"/>
     </g>
    </svg>

扩展属性
================

内容content
====================

/api/v1/content/get
-------------------------
得到扩展属性

/api/v1/content/list
-------------------------
文件夹内容, 也可以是查找一个文件的信息

url参数：

- account: zopen, 账户名
- instance: default, 站点名
- uid: 12312312, 文件唯一ID，和path任选一个
- path: /files/abc.doc, 文件路径，和uid任选一个

- file_limit: 10000(最大25000)，返回内容的限额

返回：

文件夹自身信息，以及内容的清单:

- uid
- path
- revision: 12121, 具体的版本号(如果是文件)
- bytes: 230783, 文件的大小 (如果是文件)
- content_type": "application/pdf", (如果是文件)
- contents

  - uid: 121212 , 文件的唯一ID
  - path: "/Getting_Started.pdf", 所在路径
  - modified: 121231231.12, 修改时间戳
  - revision: 12121, 具体的版本号(如果是文件)
  - bytes: 230783, 文件的大小 (如果是文件)
  - content_type": "application/pdf", (如果是文件)

api/v1/content/delta 
----------------------------------
查找文件更新

参数：

- account
- instance
- uid
- path
- cursor: modified: 从什么时候开始

返回：

- cursor: 其实也是一个时间戳，用于下次继续请求
- has_more: 是否还有？
- entries: 可能发生增删改移动

  - path
  - uid
  - action: movein/moveout/rename/remove/new/update

https://www.dropbox.com/developers/core/docs#delta

文件file
============

/api/v1/file/get 
----------------------
下载文件, 支持 http_range 进行断点续传

url参数：

- account: zopen, 账户名
- instance: default, 站点名
- uid: 12312312, 文件唯一ID，和path任选一个
- path: /files/abc.doc, 文件路径，和uid任选一个

- rev: 1212, 版本ID，可以查找历史版本

返回：

- 返回文件内容
- http消息头包含文件的元数据，位于 ``x-edo-metadata`` 中，包括基础的元数据：

  - uid: 121212 , 文件的唯一ID
  - path: "/Getting_Started.pdf", 所在路径
  - revision: 12121, 具体的版本号
  - bytes: 230783, 文件的大小
  - modified: 121231231.12, 修改时间戳
  - content_type": "application/pdf",

参照：

https://www.dropbox.com/developers/core/docs#files-GET

api/v1/file/put
---------------------------------
使用PUT方法，上传一个文件，消息头必须包括 Content-Length 以便检查完整性

url参数：

- account: zopen, 账户名
- instance: default, 站点名
- uid: 12312312, 文件唯一ID，和path任选一个
- path: /files/abc.doc, 文件路径，和uid任选一个
- overwrite: true/false, 如果文件存在，是否保存为新版本，或者自动改名
- parent_revision: 12, 上一版本的版本号，用于检查冲突, 如果冲突，则拷贝一个分支版本

请求正文：文件内容

返回: 文件元数据, 同上

参照：

https://www.dropbox.com/developers/core/docs#files_put

api/v1/file/chunked_upload 
------------------------------------------
断点续传

参照：

https://www.dropbox.com/developers/core/docs#chunked-upload

api/v1/file/commit_chunked_upload
--------------------------------------------------
提交断点续传

参照：

https://www.dropbox.com/developers/core/docs#commit-chunked-upload

